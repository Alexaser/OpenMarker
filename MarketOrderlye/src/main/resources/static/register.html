<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        form { max-width: 300px; margin: auto; }
        input, button { width: 100%; margin: 8px 0; padding: 10px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>

<h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>

<form id="registerForm">
    <input type="text" id="name" placeholder="–ò–º—è" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="text" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 79991234567)" required>
    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
    <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</form>

<p id="message"></p>

<script>
    document.getElementById("registerForm").addEventListener("submit", async function(event) {
        event.preventDefault(); // üî• –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

        // üìå –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const phone = document.getElementById("phone").value;
        const password = document.getElementById("password").value;

        const messageElement = document.getElementById("message");

        try {
            // üìå –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä (POST /auth/register)
            const response = await fetch("http://localhost:8080/auth/register", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ name, email, phone, password })
            });

            const data = await response.text(); // –ß–∏—Ç–∞–µ–º –æ—Ç–≤–µ—Ç

            if (response.ok) {
                messageElement.innerHTML = "‚úÖ " + data;
                messageElement.className = "success";
            } else {
                messageElement.innerHTML = "‚ùå " + data;
                messageElement.className = "error";
            }

        } catch (error) {
            messageElement.innerHTML = "‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º!";
            messageElement.className = "error";
        }
    });
</script>

</body>
</html>